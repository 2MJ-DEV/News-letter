<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Newsletter Subscription</title>
  <link rel="stylesheet" href="https://templates.smadmail.com/css/iframe.css" />
</head>

<body class="w-screen overflow-x-hidden text-zinc-800 duration-300 bg-white relative">

  <header class="w-full px-4 sm:px-6 lg:px-8 py-4 lg:py-5 lg:w-[75vw] lg:mx-auto">
    <nav>
      <div class="flex justify-between items-center">
        <!-- Logo -->
        <div class="z-50"> <!-- z-index élevé pour le mobile menu -->
          <a href="http://julesmukadi.me/">
            <img src="./src/assets/Logo-2MJ.jpg"
              class="w-13 h-13 sm:w-11 sm:h-11 rounded-full border border-gray-200 shadow-sm" alt="logo">
          </a>
        </div>
        <div class="">
          <ul class="hidden lg:flex space-x-6">
            <li>
              <a href="#" class="text-sm font-semibold text-gray-600 hover:text-blue-500 transition-all duration-300">API</a>
            </li>
            <li>
              <a href="#" class="text-sm font-semibold text-gray-600 hover:text-blue-500 transition-all duration-300">Help</a>
            </li>
            <li>
              <a href="#" class="text-sm font-semibold text-gray-600 hover:text-blue-500 transition-all duration-300">Login in</a>
            </li>
            <li>
              <a href="#"
                class="text-sm font-semibold text-black hover:text-blue-500 border border-gray-200 px-5 py-3 rounded-lg duration-300">Sign
                up</a>
            </li>
          </ul>
        </div>
    </nav>
  </header>

  <!-- == contenu de la page == -->
  <main class="relative z-20">
    <section
      class="h-max lg:w-[85vw] mx-auto p-5 lg:p-0 grid gap-5 items-center relative top-3 lg:top-28 mb-12 lg:mb-40">
      <div class="grid lg:grid-cols-2 justify-center items-center gap-6 lg:gap-8 lg:w-[75vw] lg:mx-auto">
        <div class="flex flex-col justify-center items-center gap-10 mt-15 lg:h-auto">
          <div class="text-4xl lg:text-5xl">
            <h1 class="text-2xl lg:text-3xl text-neutral-800 px-2 text-center w-full text-balance">
              A high-quality solution for those who want a beautiful startup website quickly
            </h1>
          </div>
          <div class="">
            <form id="emailForm" class="flex flex-col gap-5">
              <!-- == Champ Nom == -->
              <div class="relative">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-5 h-5 text-gray-500 dark:text-gray-400">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                  </svg>
                </div>
                <input type="text" id="nameInput"
                  class="bg-gray-50 border border-gray-100 text-black text-sm rounded-full block w-full ps-10 p-2.5"
                  placeholder="Your name">
              </div>
        
              <!-- == Champ Email == -->
              <div class="relative mb-4">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                  <svg class="w-4 h-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                    viewBox="0 0 20 16">
                    <path d="m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z" />
                    <path
                      d="M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z" />
                  </svg>
                </div>
                <input type="email" id="emailInput"
                  class="bg-gray-50 border border-gray-100 text-black text-sm rounded-full block w-full ps-10 p-2.5"
                  placeholder="name@gmail.com *" required>
              </div>
        
              <button type="submit" id="submitBtn"
                class="bg-blue-700 text-white py-2 rounded-full hover:bg-blue-800 transition-all duration-300">Send</button>
              <span class="text-gray-400 mb-10">By signing up, you agree to the Terms of Service</span>
        
              <!-- == Message de statut (ajout minimal) == -->
              <div id="formStatus" class="text-sm hidden"></div>
            </form>
          </div>
        </div>
        <div class="lg:flex flex-col hidden sm:hidden justify-center items-center gap-5">
          <div class="mb-4">
            <img src="./src/assets/photo-1665470909905-129dada26242.avif" alt="newsletter illustration" loading="lazy"
              class="w-105 h-75 flex justify-center items-center border border-gray-200 rounded-lg shadow-lg">
          </div>
          <div class="text-center">
            <p class="text-gray-400">We made it so beutiful and simple. It combines landings, pages, blogs and shop
              screens. It is definitely the tool you
              need in your collection!</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="/src/main.js"></script>
  <script>
   document.getElementById('emailForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const form = e.target;
      const submitBtn = document.getElementById('submitBtn');
      const originalButtonHTML = submitBtn.innerHTML; // Sauvegarde du contenu HTML original du bouton

      // Afficher un spinner pendant le chargement
      submitBtn.disabled = true;
      submitBtn.innerHTML = `
    <svg class="animate-spin h-5 w-5 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
  `;

      try {
        // Appel API Smadmail
        const response = await fetch('https://api.smadmail.com/api/v1/email/save', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            email: document.getElementById('emailInput').value,
            name: document.getElementById('nameInput').value || null,
            project_id: "e271358a-f006-4ec4-bd57-401557671a5a",
            private_key: "smad250328133031602341c901"
          })
        });

        if (!response.ok) {
          throw new Error(await response.text());
        }

        // Succès : Afficher le SVG dans le bouton
        submitBtn.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mx-auto">
        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
      </svg>
    `;
        submitBtn.classList.add('bg-bleu-600', 'hover:bg-blue-700'); // Change la couleur du bouton pour indiquer le succès

        // Réinitialiser le formulaire après un délai
        setTimeout(() => {
          submitBtn.innerHTML = originalButtonHTML; // Restaure le contenu HTML original
          submitBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
          submitBtn.disabled = false;
          form.reset();
        }, 2000); // 2 secondes avant de réinitialiser
      } catch (error) {
        // Erreur : Afficher le message d'erreur dans le bouton
        submitBtn.innerHTML = 'Error!';
        submitBtn.classList.add('bg-red-600', 'hover:bg-red-700');

        setTimeout(() => {
          submitBtn.innerHTML = originalButtonHTML; // Restaure le contenu HTML original
          submitBtn.classList.remove('bg-red-600', 'hover:bg-red-700');
          submitBtn.disabled = false;
        }, 2000); // 2 secondes avant de réinitialiser
      }
    });
  </script>
</body>

</html>